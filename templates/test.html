<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo1.png') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <style>

        body {
            font-family: Arial, sans-serif;
            background-color: #fff;
            background-image: url("{{ url_for('static', filename='img/background7.png') }}");
            background-size: 100% 100vh; /* Set the background size to "auto" */
            background-repeat: no-repeat; /* Prevent the background from repeating */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
header {
    background-color: transparent;
}

header nav {
    background-color: rgba(51, 51, 51, 0.7);
    color: #fff;
    padding: 15px 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header .logo {
    margin: 0 50px;
}

header .logo img {
    height: 60px;
}

header ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
}

header ul li {
    margin-right: 20px;
}

header ul li a {
    color: #fff;
    text-decoration: none;
    font-size: 16px;
    transition: color 0.3s ease;
}

header ul li a:hover {
    color: #ff9900;
}

.container {
    width: 800px;
    margin: 0 auto;
    margin-top: 25px;
    padding: 20px;
    border: 2px solid #aaa;
    background-color: #ffffffd8;
    border-radius: 10px;
}

h2, h4 {
    text-align: center;
}

.form-group {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}

.form-group label {
    flex: 1;
    font-weight: bold;
    cursor: help;
}

.form-group label::before {
    content: "?";
    display: inline-block;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #333;
    color: #fff;
    text-align: center;
    font-size: 14px;
    line-height: 18px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
}

.form-group label:hover::before {
    opacity: 1;
    visibility: visible;
}

.form-group input, .form-group select {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
    box-shadow: 2px 2px 5px #eee;
    background-color: #fff;
    color: #333;
}

.calculate-button {
    background-color: rgba(51, 51, 51, 0.8);
    color: #fff;
    padding: 12px 30px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    display: block;
    margin: 0 auto;
}

.calculate-button:hover {
    background-color: #ff7700;
}

.result {
    margin-top: 20px;
    font-size: 18px;
}

footer {
    bottom: 0;
    width: 100%;
    background-color: rgba(51, 51, 51, 0.7);
    color: #fff;
    padding: 0.5% 0;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
}

.footer-links {
    display: flex;
    margin-bottom: 20px;
}

.footer-links a {
    color: #fff;
    text-decoration: none;
    margin: 0 15px;
    font-size: 14px;
    transition: color 0.3s ease;
}

.footer-links a:hover {
    color: #ff9900;
}

.social-icons {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

.social-icons a {
    color: #fff;
    text-decoration: none;
    font-size: 24px;
    margin: 0 15px;
    transition: color 0.3s ease;
}

.social-icons a:hover {
    color: #ff9900;
}

.copyright {
    font-size: 14px;
}

.social-icon:hover {
    color: #ff9900;
}

.styled-select {
    width: 100%;
}

.calculator-container {
    display: flex;
    width: 100%;
    margin-bottom: 4%;
}

.result-container {
    margin-top: 5px;
    flex: 1;
    border: 2px solid #ddd;
    background-color: #ffffffd8;
    border-radius: 10px;
    box-shadow: 2px 2px 5px #eee;
}

.result-container h2 {
    font-size: 22px;
    text-align: center;
}

.result {
    font-size: 20px;
    text-align: center;
    color: #333; /* Adjusted text color */
}

#fertilityResult {
    font-size: 20px;
}

#resultValue {
    color: #ff9900;
    font-weight: bold;
    font-size: 20px;
}

.input-success {
    border: 1px solid #ddd;
    /* Reset the border */
    border-bottom: 2px solid green;
    /* Add green underline */
}

.input-error {
    border: 1px solid #ddd;
    /* Reset the border */
    border-bottom: 2px solid red;
    /* Add red underline */
}
table {
    width: 100%;
    max-width: 1200px;
    margin: 20px auto;
    border-collapse: collapse;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    background: white;
            }

th, td {
    padding: 15px 20px;
    text-align: left;
    border-bottom: 1px solid #ddd;
    width: 50.33%; /* Set the width as needed */
}

th {
    background-color: #333;
    color: white;
}

tr:nth-child(even) {
    background-color: #f9f9f9;
}

.low {
    background-color: #add8e6;
    /* Light Blue */
    color: #333;
}

.medium {
    background-color: #fffacd;
    /* Light Yellow */
    color: #333;
}

.high {
    background-color: #ffb6c1;
    /* Light Pink */
    color: #333;
}
.description{
    display: none;
}

.description h3{
    color:#444;
    font-size: 30px;
    text-align: center;
    font-family: 'Arial';

}
.hero{
    margin-top: 2%;
     background-color: #fff;

}
main {
            background-color: #fff;
            padding: 120px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #333;
        }

        p {
            color: #666;
            margin-bottom: 40px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }
        h1, h2, h3, h4 {
            color: #333;
            /* Add a stylish font */
            font-family: 'Arial', sans-serif;
        }

        p, li {
            color: #666;
        }
        li{
            text-align: left;

        }

        #getStarted {
            /* Add a gradient background for a cool effect */
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: #fff;
            border: none;
            padding: 10px 20px;
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        #getStarted:hover {
            background: linear-gradient(45deg, #45a049, #4caf50);
        }
    </style>
</head>
<body>
    <!-- Header content goes here -->
    <header>
        <nav>
            <div class="logo">
                <a href="/home"><img class="logo" src="{{ url_for('static', filename='img/logo2.png') }}" alt="Logo"></a>
            </div>
            <ul>
                <li><a href="/home">Home</a></li>
                <li><a href="/map">Soil Map</a></li>
                <li><a href="/soil-types">Soil Types</a></li>
                <li><a href="/research">Research</a></li>
                <li><a href="/conversation">Conversation</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>

    <div class="calculator-container">
        <section id="fertilityCalculator" class="container">
            <h2 class="calculator-title">Soil Fertility Calculator</h2>
            <form id="fertilityForm">
                <div class="form-group">
                    <label for="organicCarbon" title="Enter the percentage of organic carbon in your soil.">
                        <i class="fas fa-leaf"></i> Organic Carbon (%)
                    </label>
                    <input type="number" id="organicCarbon" step="0.01" min="0" max="10">
                </div>
                <div class="form-group">
                    <label for="texture" title="Select the texture of your soil.">
                        <i class="fas fa-clone"></i> Texture
                    </label>
                    <select id="texture" class="styled-select">
                        <option value="2.5">Sandy</option>
                        <option value="5.0">Clayey</option>
                        <option value="10.0">Loamy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="salinity" title="Enter the salinity level of your soil.">
                        <i class="fas fa-water"></i> Salinity (%)
                    </label>
                    <input type="number" id="salinity" step="0.01" min="0" max="10">
                </div>
                <div class="form-group">
                    <label for="phLevel" title="Enter the pH level of your soil. It should be in the range of 4 to 8.">
                        <i class="fas fa-flask"></i> pH Level (H3O+)
                    </label>
                    <input type="number" id="phLevel" step="0.01" min="4" max="8">
                </div>
                <div class="form-group">
                    <label for="soilStructure" title="Select the soil structure.">
                        <i class="fas fa-layer-group"></i> Soil Structure
                    </label>
                    <select id="soilStructure" class="styled-select">
                        <option value="2.5">Fine-grained</option>
                        <option value="5.0">Medium-grained</option>
                        <option value="10.0">Coarse-grained</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="potassium" title="Enter the microelements content in your soil.">
                        <i class="fas fa-flask"></i> Potassium (ppm)
                    </label>
                    <input type="number" id="potassium" step="1" min="0" max="200">
                </div>
                <div class="form-group">
                    <label for="nitrogen" title="Enter the microelements content in your soil.">
                        <i class="fas fa-seedling"></i> Nitrogen (ppm)
                    </label>
                    <input type="number" id="nitrogen" step="1" min="0" max="10">
                </div>
                <button type="button" id="calculateButton" class="calculate-button">Calculate Fertility</button>
            </form>
            <div class="result-container">
                <h2 class="calculator-title">Result</h2>
                <div id="resultBlock" class="result">
                    <p>Fertility Score: <span id="resultValue">{{fertilityScore}}</span></p>
                </div>
            </div>
        </section>
    </div>

    <section id="hero" class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content" style=" display: flex; align-items: center;">
            <div class="hero-text" style="flex: 1; padding: 20px;">
                <h1 class="hero-title" style="text-align: center;">Soil Fertility Calculator</h1>
            </div>
            <div class="separator" style="border-left: 1px solid #ccc; height: 150px;"></div>
            <div class="hero-text" style="flex: 1; padding: 20px;font-size: 21px;">
                <p class="hero-subtitle" style="font-size: 19px; width:82%">Welcome to the Soil Fertility Calculator your tool for understanding and optimizing the health of your soil. This calculator evaluates various soil parameters to provide insights into the fertility of your soil, helping you make informed decisions for better crop yield and overall agricultural success.</p>
            </div>
        </div>
    </section>

    <main>
        <h1>Unlock the Potential of Your Soil with the Soil Fertility Calculator</h1>
        <p>Make informed decisions for a thriving agricultural journey. Here's why you should use the Soil Fertility Calculator:</p>
        
        <ul>
            <li><strong>Organic Carbon Assessment:</strong> Gauge organic carbon levels in your soil.</li>
            <li><strong>pH Level Evaluation:</strong> Understand soil acidity or alkalinity.</li>
            <li><strong>Texture and Structure Analysis:</strong> Explore soil texture and structure.</li>
            <li><strong>Salinity Check:</strong> Assess salinity levels to identify challenges.</li>
            <li><strong>Nutrient Analysis:</strong> Examine essential nutrients like potassium and nitrogen.</li>
        </ul>

        <p><strong>What the Results Mean:</strong></p>
        <ul>
            <li><strong>Low:</strong> Indicates that the soil parameter may need improvement.</li>
            <li><strong>Medium:</strong> Represents a moderate level, suggesting balanced conditions.</li>
            <li><strong>High:</strong> Signifies favorable conditions for that specific soil parameter.</li>
        </ul>

        <p><strong>Why Use the Soil Fertility Calculator?</strong></p>
        <ul>
            <li><strong>Informed Decision-Making:</strong> Make informed decisions regarding soil management practices and nutrient amendments.</li>
            <li><strong>Optimize Crop Growth:</strong> Enhance crop yield by addressing specific soil needs.</li>
            <li><strong>Sustainable Agriculture:</strong> Promote sustainable farming practices by tailoring soil treatments based on accurate assessments.</li>
        </ul>

        <button id="getStarted" onclick="window.location.href='#calculatorSection'">Get Started</button>
    </main>
    
    <div class ="description" id="description"><h3>Soil Fertility Analysis Results</h3></div>
<table id="resultTable" style="display:none;">
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Value</th>
            <th>Category</th>
        </tr>
    </thead>
    <tbody>
        <!-- Table body will be filled dynamically -->
    </tbody>
</table>

    <!-- Footer content goes here -->
    <footer>
        <div class="footer-links">
            <a href="{{ url_for('static', filename='privacy.html') }}">Privacy Policy</a>
            <a href="terms.html">Terms of Use</a>
            <a href="#contact">Contact</a>
        </div>
        <div class="social-icons">
            <a href="#" class="fab fa-facebook"></a>
            <a href="#" class="fab fa-twitter"></a>
            <a href="#" class="fab fa-instagram"></a>
            <a href="#" class="fab fa-telegram"></a>
        </div>
        <p class="copyright">&copy; 2023 TerraUkraine</p>
    </footer>
</body>

<script>
document.getElementById("calculateButton").addEventListener("click", function () {
    // Get input values from the form
    const organicCarbon = parseFloat(document.getElementById("organicCarbon").value);
    const phLevel = parseFloat(document.getElementById("phLevel").value);
    const texture = parseFloat(document.getElementById("texture").value);
    const soilStructure = parseFloat(document.getElementById("soilStructure").value);
    const salinity = parseFloat(document.getElementById("salinity").value);
    const potassium = parseFloat(document.getElementById("potassium").value);
    const nitrogen = parseFloat(document.getElementById("nitrogen").value);

    if (isNaN(organicCarbon) || isNaN(phLevel) || isNaN(texture) || isNaN(soilStructure) || isNaN(salinity) || isNaN(potassium) || isNaN(nitrogen)) {
        alert("Please fill in all fields.");
        return;
    }

    // Create a data object to send as JSON
    const data = {
        organicCarbon: organicCarbon,
        phLevel: phLevel,
        texture: texture,
        soilStructure: soilStructure,
        salinity: salinity,
        potassium: potassium,
        nitrogen: nitrogen
    };

    // Create a new XMLHttpRequest object
    const xhr = new XMLHttpRequest();

    // Configure the request (method, URL, and content type)
    xhr.open("POST", "/calculate_fertility", true);
    xhr.setRequestHeader("Content-Type", "application/json"); // Set the Content-Type header to 'application/json'

    // Set up an event handler to process the response
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                // Successful response
                const result = JSON.parse(xhr.responseText);
                const fertilityScore = result.OverallCategory;

                // Update the DOM element with the id 'resultValue'
                document.getElementById("resultValue").textContent = fertilityScore;

                // Fill the table with data from the response
                fillTable(result.Categories);

                // Show the result table
                document.getElementById("resultTable").style.display = "block";
                document.getElementById("description").style.display = "block";
            } else {
                // Handle errors here (e.g., display an error message)
                console.error("Error calculating soil fertility.");
            }
        }
    };

    // Send the data as JSON
    xhr.send(JSON.stringify(data));
});

// Function to fill the table with data from the response
function fillTable(categories) {
    const tableBody = document.getElementById('resultTable').getElementsByTagName('tbody')[0];

    // Clear existing rows
    tableBody.innerHTML = '';

    // Add rows to the table
    for (const parameter in categories) {
        if (categories.hasOwnProperty(parameter)) {
            const data = categories[parameter];
            const newRow = tableBody.insertRow(tableBody.rows.length);
            const parameterCell = newRow.insertCell(0);
            const valueCell = newRow.insertCell(1);
            const categoryCell = newRow.insertCell(2);

            parameterCell.textContent = parameter;
            valueCell.textContent = data.Value;
            categoryCell.textContent = data.Category;
        }
    }
}

</script>



</html>
