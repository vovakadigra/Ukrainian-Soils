<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo1.png') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            background-image: url("{{ url_for('static', filename='img/background.png') }}");
            background-size: cover;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: transparent;
        }

        /* Add a background color to the header content (optional) */
        header nav {
            background-color: rgba(51, 51, 51, 0.7);
            color: #fff;
            padding: 15px 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header .logo {
            margin: 0 50px;
        }

        header .logo img {
            height: 60px;
        }

        header ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        header ul li {
            margin-right: 20px;
        }

        header ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            transition: color 0.3s ease;
        }

        header ul li a:hover {
            color: #ff9900;
        }

        .container {
        width: 70%; /* Increase the max-width value as needed */
        margin-left: 450px;
        margin-top: 45px;
        padding: 20px;
        border: 2px solid #aaa;
        background-color: #ffffffb7;
        border-radius: 10px;
        }

        h2 {
            font-size: 28px;
            margin: 15px 0;
            text-align: center;
        }
        h4 {
            font-size: 23px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        .form-group input {
            box-sizing: border-box;
        }

        label {
            font-weight: bold;
            cursor: help;
        }

        label::before {
            content: "?";
            display: inline-block;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #333;
            color: #fff;
            text-align: center;
            position: absolute;
            top: -10px;
            left: calc(100% + 5px);
            font-size: 14px;
            line-height: 18px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }

        label:hover::before {
            opacity: 1;
            visibility: visible;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-shadow: 2px 2px 5px #eee;
        }

        .calculate-button {
            background-color: rgba(51, 51, 51, 0.7);
            color: #fff;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            display: block; /* Makes the button a block-level element */
            margin: 0 auto; /* Centers the button horizontally within its container */
            
        }

        .calculate-button:hover {
            background-color: #ff7700;
        }

        .result {
            margin-top: 20px;
            font-size: 18px;
        }

        footer {
            width: 100%;
            background-color: rgba(51, 51, 51, 0.7);
            color: #fff;
            padding: 10px 0;
            text-align: center;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1;
        }

        footer p {
            margin: 0;
            padding: 20px 0;
            text-align: center;
        }

        .footer-links a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
        }

        .footer-links a:hover {
            color: #ff9900;
        }

        .styled-select {
            width:100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-shadow: 2px 2px 5px #eee;
            background-color: #fff;
            color: #333;
        }

        .styled-select select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-shadow: 2px 2px 5px #eee;
            background-color: #fff;
            color: #333;
        }

        .styled-select select:hover {
            background-color: #fff;
            color: #333;
        }

        .styled-select select:focus {
            outline: none;
            background-color: #fff;
            color: #333;
            box-shadow: 2px 2px 5px #eee;
        }

        .styled-select select option {
            background-color: #fff;
            color: #333;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 12px;
        }

        .hidden {
            display: none;
        }

        .calculator-container {
            display: flex;
        }
        .calculator-description {
        background-color: #ffffffb7;
        padding: 20px;
        border-radius: 10px;
        margin-left: 15px;
        margin-top: 20px;
        width: 45%; /* Changed width to 100% */
        transition: transform 0.5s ease;
        transform: perspective(100px) rotateY(0deg);
    }

        .result-circle-container {
            display: flex;
            max-width: 280px;
            transition: transform 0.5s ease;
        }


        .result-circle {
            background-color: #ff9900;
            color: #fff;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            animation: scale-up 0.5s ease;
        }

        @keyframes scale-up {
            0% {
                transform: scale(0);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Style for the result text */

        #resultBlock {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 45px;
            margin-left: 16px;
            border-radius: 10px;
            background-color: #ffffffb7;
            width: 49%;
            height:55%;
            transition: transform 0.5s ease;
            transform: perspective(100px) rotateY(0deg);
        }



        #resultBlock .result-circle {
            background-color: #09e251;
            color: #fff;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            animation: scale-up 0.5s ease;
        }


    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">
                <a href="/home"><img class="logo" src="{{ url_for('static', filename='img/logo2.png') }}" alt="Logo"></a>
            </div>
            <ul>
                <li><a href="/home">Home</a></li>
                <li><a href="/map">Soil Map</a></li>
                <li><a href="soil types.html">Soil Types</a></li>
                <li><a href="#research">Research</a></li>
                <li><a href="#conservation">Conservation</a></li>
                <li><a href="#blog">Blog</a></li>
                <li><a href="#resources">Resources</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>

    <div class="calculator-container">
        <section id="fertilityCalculator" class="container">
            <h2 class="calculator-title">Soil Fertility Calculator</h2>
            <form id="fertilityForm">
                <div class="form-group">
    <label for="organicCarbon" title="Enter the percentage of organic carbon in your soil.">
        <i class="fas fa-leaf"></i> Organic Carbon (%)
    </label>
    <input type="number" id="organicCarbon" step="0.01" min="0" max="10">
</div>

<div class="form-group">
    <label for="phLevel" title="Enter the pH level of your soil. It should be in the range of 4 to 8.">
        <i class="fas fa-flask"></i> pH Level (H3O+)
    </label>
    <input type="number" id="phLevel" step="0.01" min="4" max="8">
</div>

<div class="form-group">
    <label for="texture" title="Select the texture of your soil.">
        <i class="fas fa-clone"></i> Texture
    </label>
    <select id="texture" class="styled-select">
        <option value="0.0">Sandy</option>
        <option value="5.0">Clayey</option>
        <option value="10.0">Loamy</option>
    </select>
</div>

<div class="form-group">
    <label for="soilStructure" title="Select the soil structure.">
        <i class="fas fa-layer-group"></i> Soil Structure
    </label>
    <select id="soilStructure" class="styled-select">
        <option value="0.0">Fine-grained</option>
        <option value="5.0">Medium-grained</option>
        <option value="10.0">Coarse-grained</option>
    </select>
</div>

<div class="form-group">
    <label for="salinity" title="Enter the salinity level of your soil.">
        <i class="fas fa-water"></i> Salinity (%)
    </label>
    <input type="number" id="salinity" step="0.01" min="0" max="10">
</div>

<div class="form-group">
    <label for="microelements" title="Enter the amount of microelements in your soil.">
        <i class="fas fa-microscope"></i> Microelements
    </label>
    <input type="number" id="microelements" step="0.01" min="0" max="10">
</div>

                <button type="button" id="calculateButton" class="calculate-button">Calculate Fertility</button>
            </form>
        </section>

        <div class="result-description-container">
            <div id="resultBlock" class="hidden">
                <div class="result-circle-container">
                    <h4>Soil fertility level</h4>

                    <div class="result-circle">
                        <span id="fertilityScore">8.7</span>
                    </div>
                </div>
            </div>

            <div class="calculator-description">
                <h3>Calculator Description</h3>
                <p>
                    This soil fertility calculator helps you assess the fertility of your soil based on various factors, including organic carbon content, pH level, texture, soil structure, salinity, and microelements. Simply enter the required information, and the calculator will provide you with a soil fertility score to help you make informed decisions for your agricultural needs.
                </p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="privacy.html">Privacy Policy</a>
            <a href="terms.html">Terms of Use</a>
            <a href="#contact">Contact</a>
        </div>
        <p>&copy; 2023 TerraUkraine</p>
    </footer>

    <script>
        document.getElementById("calculateButton").addEventListener("click", function () {
            const organicCarbon = parseFloat(document.getElementById("organicCarbon").value);
            const phLevel = parseFloat(document.getElementById("phLevel").value);
            const texture = parseFloat(document.getElementById("texture").value);
            const soilStructure = parseFloat(document.getElementById("soilStructure").value);
            const salinity = parseFloat(document.getElementById("salinity").value);
            const microelements = parseFloat(document.getElementById("microelements").value);

            if (isNaN(organicCarbon) || isNaN(phLevel) || isNaN(texture) || isNaN(soilStructure) || isNaN(salinity) || isNaN(microelements)) {
                alert("Please fill in all fields.");
                return;
            }

            const xhr = new XMLHttpRequest();
            xhr.open("POST", "/calculate_fertility", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        const result = JSON.parse(xhr.responseText);
                        const fertilityScore = result.fertility;

                        // Show the result block
                        const resultBlock = document.getElementById("resultBlock");
                        resultBlock.classList.remove("hidden");

                        // Update the value in the circular element based on fertility score
                        const fertilityScoreElement = document.getElementById("fertilityScore");
                        fertilityScoreElement.innerText = fertilityScore;
                    } else {
                        // Handle errors here
                        console.error("Error calculating soil fertility.");
                    }
                }
            };

            const data = JSON.stringify({
                organic_carbon: organicCarbon,
                ph_level: phLevel,
                texture: texture,
                soil_structure: soilStructure,
                salinity: salinity,
                microelements: microelements,
            });

            xhr.send(data);
        });
    </script>
</body>
</body>
</html>
